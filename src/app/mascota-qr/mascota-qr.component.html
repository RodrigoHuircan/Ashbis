
<ion-content class="ion-padding">

  <!-- 1. Estado de Carga -->
  <div *ngIf="cargando" class="ion-text-center ion-padding-top">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Generando QR...</p>
  </div>

  <!-- 2. Contenido principal (cuando no está cargando) -->
  <div *ngIf="!cargando">

    <!-- 2A. El Código QR (Si hay datos) -->
    <!-- Usamos 'qrData', que es la variable que definimos en el .ts -->
    <ion-card *ngIf="qrData" class="ion-text-center ion-padding">
      <ion-card-header>
        <ion-card-title>¡QR Listo!</ion-card-title>
        <ion-card-subtitle>Escanea este código</ion-card-subtitle>
      </ion-card-header>

      <ion-card-content class="qr-container">
        <!--
          Aquí usamos el componente <qrcode> de 'angularx-qrcode'
          [qrdata] es la vCard que generamos en el .ts
        -->
        <qrcode
          [qrdata]="qrData"
          [width]="256"
          elementType="canvas"
          errorCorrectionLevel="M">
        </qrcode>
      </ion-card-content>
    </ion-card>

    <!-- 2B. Advertencia (Si faltan datos) -->
    <!-- Se muestra si 'qrData' es null (porque faltan nombre o teléfono) -->
    <ion-card *ngIf="!qrData" color="warning">
      <ion-card-header>
        <ion-card-title>Faltan Datos</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>No se pudo generar el código QR.</p>
        <p>Por favor, asegúrate de tener al menos un **nombre** y un **teléfono** guardados en tu perfil.</p>

        <!-- Botón para ir a editar el perfil (usa RouterLink) -->
        <ion-button
          fill="outline"
          color="dark"
          class="ion-margin-top"
          [routerLink]="['/tabs/perfil']">
          Editar Perfil
        </ion-button>
      </ion-card-content>
    </ion-card>

    <!-- Instrucciones -->
    <ion-card>
       <ion-card-content>
        <p>Este código QR contiene tu información de contacto (Nombre y Teléfono). Si alguien encuentra a tu mascota, puede escanearlo para contactarte.</p>
      </ion-card-content>
    </ion-card>

  </div>

</ion-content>
