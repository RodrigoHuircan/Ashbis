<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/login"></ion-back-button>
    </ion-buttons>
    <ion-title>Recuperar Contraseña</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="forgot-password-container">

    <ion-card>
      <ion-card-header>
        <ion-card-title>¿Olvidaste tu contraseña?</ion-card-title>
      </ion-card-header>

      <ion-card-content>
        <p>Ingresa tu email y te enviaremos un enlace para restablecer tu contraseña. </p>

        <form [formGroup]="emailForm" (ngSubmit)="enviarRecuperacion()">

          <ion-item lines="none">
            <ion-label position="stacked">Email</ion-label>
            <ion-input
              type="email"
              formControlName="email"
              placeholder="tu@email.com">
            </ion-input>
          </ion-item>

          <ion-text color="danger" *ngIf="email?. invalid && (email?.dirty || email?.touched)">
            <p *ngIf="email?.errors?.['required']">El email es obligatorio.</p>
            <p *ngIf="email?. errors?.['email']">Debe ser un correo válido.</p>
          </ion-text>

          <ion-text color="danger" *ngIf="errorMessage">
            <p>{{ errorMessage }}</p>
          </ion-text>

          <ion-text color="success" *ngIf="successMessage">
            <p>{{ successMessage }}</p>
          </ion-text>

          <ion-button 
            type="submit" 
            color="danger" 
            expand="block"
            [disabled]="cargando">
            <ion-spinner *ngIf="cargando" name="crescent"></ion-spinner>
            <span *ngIf="! cargando">ENVIAR ENLACE</span>
          </ion-button>

          <ion-button 
            fill="clear" 
            expand="block"
            (click)="volverAlLogin()">
            Volver al inicio de sesión
          </ion-button>

        </form>
      </ion-card-content>
    </ion-card>

  </div>
</ion-content>
